<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document Section</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="viewer-styles.css">
  </head>
  <body>
    <!-- PIN Entry Overlay -->
    <div class="pin-overlay" id="pin-overlay">
      <div class="pin-container">
        <div class="pin-title">Enter PIN</div>
        <div class="pin-subtitle">Please enter your PIN to access the site</div>
        <input
          type="password"
          class="pin-input"
          id="pin-input"
          placeholder="Enter PIN"
          maxlength="10"
          autocomplete="off"
        />
        <div class="pin-error" id="pin-error">Incorrect PIN. Please try again.</div>
        <button class="pin-submit" id="pin-submit">Submit</button>
      </div>
    </div>

    <div class="card main-content" id="main-content">
      <div class="main-layout">
        <!-- Left Sidebar - Document List -->
        <div class="column column-left">
          <div class="sidebar-header">
            <button class="back-to-main-btn" id="back-to-main-btn" title="Back to Main">← Back</button>
            <div class="section-title-row">
              <h2 class="section-title" id="section-title">POA</h2>
              <button class="add-document-btn" id="add-document-btn" title="Add Document">+</button>
            </div>
          </div>
          <div class="documents-sidebar">
            <div class="documents-list" id="documents-list">
              <div class="empty-state">Loading documents...</div>
            </div>
          </div>
        </div>

        <!-- Center - Document Viewer -->
        <div class="column column-center">
          <div class="viewer-header">
            <div class="viewer-title" id="viewer-title">Select a document to view</div>
            <button class="close-viewer-btn" id="close-viewer-btn" title="Close" style="display: none;">✕</button>
          </div>
          <div class="viewer-content">
            <div id="viewer-placeholder" class="empty-state">Select a document from the left to view it here</div>
            <iframe id="pdf-viewer" class="pdf-viewer"></iframe>
            <img id="image-viewer" class="image-viewer" alt="Document preview" />
          </div>
        </div>

        <!-- Right Sidebar - Analysis -->
        <div class="column column-right">
          <div id="analysis-section" class="analysis-section">
            <div class="analysis-title">Analysis</div>
            <div id="analysis-meta" class="analysis-meta"></div>
            <div id="analysis-body" class="analysis-body analysis-empty">No analysis yet</div>
            <div id="analyze-controls" style="display: none; padding: 16px; border-top: 1px solid #e5e7eb;">
              <select id="state-select" class="state-select">
                <option value="">Select a state...</option>
                <option value="Alabama">Alabama</option>
                <option value="Alaska">Alaska</option>
                <option value="Arizona">Arizona</option>
                <option value="Arkansas">Arkansas</option>
                <option value="California">California</option>
                <option value="Colorado">Colorado</option>
                <option value="Connecticut">Connecticut</option>
                <option value="Delaware">Delaware</option>
                <option value="Florida">Florida</option>
                <option value="Georgia">Georgia</option>
                <option value="Hawaii">Hawaii</option>
                <option value="Idaho">Idaho</option>
                <option value="Illinois">Illinois</option>
                <option value="Indiana">Indiana</option>
                <option value="Iowa">Iowa</option>
                <option value="Kansas">Kansas</option>
                <option value="Kentucky">Kentucky</option>
                <option value="Louisiana">Louisiana</option>
                <option value="Maine">Maine</option>
                <option value="Maryland">Maryland</option>
                <option value="Massachusetts">Massachusetts</option>
                <option value="Michigan">Michigan</option>
                <option value="Minnesota">Minnesota</option>
                <option value="Mississippi">Mississippi</option>
                <option value="Missouri">Missouri</option>
                <option value="Montana">Montana</option>
                <option value="Nebraska">Nebraska</option>
                <option value="Nevada">Nevada</option>
                <option value="New Hampshire">New Hampshire</option>
                <option value="New Jersey">New Jersey</option>
                <option value="New Mexico">New Mexico</option>
                <option value="New York">New York</option>
                <option value="North Carolina">North Carolina</option>
                <option value="North Dakota">North Dakota</option>
                <option value="Ohio">Ohio</option>
                <option value="Oklahoma">Oklahoma</option>
                <option value="Oregon">Oregon</option>
                <option value="Pennsylvania">Pennsylvania</option>
                <option value="Rhode Island">Rhode Island</option>
                <option value="South Carolina">South Carolina</option>
                <option value="South Dakota">South Dakota</option>
                <option value="Tennessee">Tennessee</option>
                <option value="Texas">Texas</option>
                <option value="Utah">Utah</option>
                <option value="Vermont">Vermont</option>
                <option value="Virginia">Virginia</option>
                <option value="Washington">Washington</option>
                <option value="West Virginia">West Virginia</option>
                <option value="Wisconsin">Wisconsin</option>
                <option value="Wyoming">Wyoming</option>
              </select>
              <button id="run-analysis-btn" class="analyze-button">Run Analysis</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="section-view.js"></script>
  </body>
</html>

